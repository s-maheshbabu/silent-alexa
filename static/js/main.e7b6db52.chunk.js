(this.webpackJsonpsilent_alexa=this.webpackJsonpsilent_alexa||[]).push([[0],{129:function(e,t){var a=Object.freeze({EMPTY_RESPONSE_FROM_ALEXA:"a canned response when Alexa repsonds with an empty message."});e.exports={cannedResponses:a}},138:function(e,t,a){e.exports=a(321)},143:function(e,t,a){},144:function(e,t,a){},259:function(e,t,a){},260:function(e,t,a){},285:function(e,t,a){},302:function(e,t,a){},303:function(e,t,a){},304:function(e,t,a){},317:function(e,t,a){},32:function(e,t,a){var n=(0,a(11).Map)({INVALID_REQUEST_EXCEPTION:"a canned response for INVALID_REQUEST_EXCEPTION",UNAUTHORIZED_REQUEST_EXCEPTION:"a canned response for UNAUTHORIZED_REQUEST_EXCEPTION",UNSUPPORTED_MEDIA_TYPE:"a canned response for UNSUPPORTED_MEDIA_TYPE",THROTTLING_EXCEPTION:"a canned response for THROTTLING_EXCEPTION",INTERNAL_SERVICE_EXCEPTION:"a canned response for INTERNAL_SERVICE_EXCEPTION","N/A":"a canned response for N/A Exception",UNKNOWN_ERROR:"a canned response for UNKNOWN_ERROR. This shouldn't ever happen. Don't show it as an Alexa bubble."}),r=Object.freeze({UNKNOWN_ERROR:"UNKNOWN_ERROR"});e.exports={cannedErrorResponses:n,customErrorCodes:r}},321:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(24),o=a.n(s),i=(a(143),a(19)),c=a(25),l=a(26),u=a(27),d=(a(144),a(124)),m=a.n(d),h=a(42),E=a.n(h),p=a(43),g=a(125),f=a.n(g);a(259);function v(e){return r.a.createElement(f.a,{className:"header-flat-button",label:e.label,onClick:function(){return e.onClick()}})}var A=a(322),b="amazon_Login_accessToken",x=Object.freeze({scope:["alexa:all","profile"],scope_data:{"alexa:all":{productID:"Silent_Alexa",productInstanceAttributes:{deviceSerialNumber:"12345"}}},popup:!1});function R(){var e=Object(A.a)([b]),t=Object(p.a)(e,2),a=t[0],n=t[1];return void 0!==a[b]?r.a.createElement(v,{label:"Logout",onClick:function(){return function(e){e(b,void 0,{maxAge:0,secure:!1,path:"/"})}(n)}}):r.a.createElement(v,{label:"Login",onClick:w})}function w(){window.amazon.Login.authorize(x,window.location.origin+"/authresponse")}a(260);function O(e){return r.a.createElement("div",{id:"header"},r.a.createElement("div",{id:"header-info"},r.a.createElement(E.a,null,r.a.createElement(m.a,{className:"app-bar",showMenuIconButton:!1,title:"Silent Alexa (Under Construction)",iconElementRight:r.a.createElement(R,null)}))))}var T=a(1),N=a(126),S=a.n(N),y=a(137),_={text:{fontSize:20},chatbubble:{background:"#00ACE0"},userBubble:{background:"#646A72"}},C=function(e){return r.a.createElement(T.ChatBubble,{message:e.message,bubbleStyles:Object(y.a)({},_)})},k=a(32),U=a(127),L=a.n(U),j=function(e){return r.a.createElement("form",{onSubmit:function(t){return e.onSubmit(t)}},r.a.createElement(E.a,null,r.a.createElement(L.a,{id:"user-request-to-alexa-text-field",hintText:"Type your request for Alexa..",value:e.value,onChange:function(t){return e.onChange(t)}})))},M=(a(285),a(11));function I(){return r.a.createElement("svg",{width:"24",viewBox:"0 0 24 24"},r.a.createElement("path",{fill:"#00ACE0",d:"M0,10.0000489 C0,15.0707816 3.77428289,19.2594477 8.66667972,19.9113334 L8.66667972,17.8962718 C8.66667972,17.3281595 8.30829606,16.8174945 7.76974193,16.636736 C4.94690794,15.688512 2.927648,12.9904434 3.00202582,9.8313279 C3.09245359,5.9853886 6.22532565,2.96152397 10.0722248,3.00037678 C13.9049334,3.03913173 16.9999315,6.15812215 16.9999315,10.0000489 C16.9999315,10.087639 16.9977785,10.1747398 16.9945489,10.2614491 C16.9887748,10.4004189 16.9838815,10.4807669 16.9775203,10.5606256 C16.975563,10.5860707 16.9731163,10.611418 16.9707676,10.6367653 C16.9658743,10.692549 16.9601002,10.7479411 16.9538368,10.8032355 C16.9466926,10.8660654 16.9385698,10.928504 16.9298598,10.9906489 C16.9258473,11.01903 16.9220305,11.0475091 16.9177244,11.0756945 C16.0607158,16.7212922 8.70778325,19.8942068 8.66756051,19.9115291 C9.10355154,19.9694658 9.54815475,20 9.99990213,20 C15.5228467,20 20,15.5229227 20,10.0000489 C20,4.47717519 15.5228467,0 9.99990213,0 C4.47715329,0 0,4.47717519 0,10.0000489 Z",transform:"translate(2 2)"}))}var H=Object.freeze({USER:0,ALEXA:1}),X=Object(M.Map)([[H.USER,{name:"You",avatar:void 0}],[H.ALEXA,{avatar:r.a.createElement(I,null)}]]),P=a(87),z=a.n(P),q=a(128),W=a(88),D=a(129),F=a(136),B=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).message=e,n.name="IllegalArgumentError",n}return a}(Object(F.a)(Error)),V=a(130),G=a(16),J=a.n(G),K=a(131),Q=a.n(K);function Y(e){if(!e)throw new B("The response to be parsed cannot be empty. Input: "+e);var t=Q()(e);if(!t||!t.multipart)throw new B("Given raw response is not a valid multi-part message. Input: "+e);var a,n=t.multipart.filter((function(e){return"application/json; charset=UTF-8"===Object(M.getIn)(e,["headers","Content-Type"])&&e.body})).map((function(e){return e.body})),r=[],s=Object(V.a)(n);try{for(s.s();!(a=s.n()).done;){var o=a.value,i=void 0;try{i=JSON.parse(o)}catch(c){throw new B("Given directive couldn't be parsed to a JSON object. Input: \" ".concat(o.toString(),"\n        StackTrace:\n        ").concat(J.a.inspect(c,{showHidden:!0,depth:null})))}if(Z(i),$(i)){if(!Object(M.hasIn)(i,["directive","payload","caption"]))throw new B("Given Speak directive doesn't contain the expected path directive.payload.caption. Input: "+"".concat(J.a.inspect(i,{showHidden:!0,depth:null})));r.push(i.directive.payload.caption)}else console.log("A non-Speak directive was encountered. Skipping the directive. "+J.a.inspect(i,{showHidden:!0,depth:null}))}}catch(l){s.e(l)}finally{s.f()}return Object(M.fromJS)(r)}function Z(e){if(!Object(M.hasIn)(e,["directive","header","name"]))throw new B("Given directive doesn't declare a type at directive.header.name. Input: "+"".concat(J.a.inspect(e,{showHidden:!0,depth:null})))}function $(e){return"Speak"===e.directive.header.name}var ee=a(132),te=a.n(ee),ae=a(295).sprintf,ne=W.urls.NA+W.paths.EVENTS,re=function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,[{key:"sendTextMessageEvent",value:function(){var e=Object(q.a)(z.a.mark((function e(t,a){var n,r,s,o,i;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&a){e.next=2;break}throw new B("The request string to Alexa or the access token cannot be empty.\n        RequestString: ".concat(t,"\n        AccessToken: ").concat(a));case 2:return n=JSON.stringify(this.buildTextMessageEvent(t)),r=this.buildTextMessageFetchRequestOptions(n,a),s=!1,e.next=7,fetch(ne,r).then((function(e){return e.ok?(s=!0,e.text()):e.json()})).then((function(e){o=e})).catch((function(e){s=!1,console.log(J.a.inspect(e,{showHidden:!0,depth:null}))}));case 7:if(!s){e.next=17;break}return e.prev=8,o&&(i=Y(o)),i&&i.get(0)||(i=M.List.of(D.cannedResponses.EMPTY_RESPONSE_FROM_ALEXA)),e.abrupt("return",i);case 14:e.prev=14,e.t0=e.catch(8),console.log("Encountered an error while trying to parse the speak directive from AVS."+J.a.inspect(e.t0,{showHidden:!0,depth:null}));case 17:return e.abrupt("return",M.List.of(this.convertErrorToHumanReadableMessage(o)));case 18:case"end":return e.stop()}}),e,this,[[8,14]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"convertErrorToHumanReadableMessage",value:function(e){var t;return Object(M.hasIn)(e,["payload","code"])&&(t=e.payload.code),k.cannedErrorResponses.get(t,k.cannedErrorResponses.get(k.customErrorCodes.UNKNOWN_ERROR))}},{key:"buildTextMessageFetchRequestOptions",value:function(e,t){return{body:ae('--silent-alexa-http-boundary\nContent-Disposition: form-data; name="metadata"\nContent-Type: application/json; charset=UTF-8\n\n%s',e),headers:{Authorization:"Bearer "+t,"content-type":"multipart/form-data; boundary=silent-alexa-http-boundary"},cache:"no-store",method:"POST"}}},{key:"buildTextMessageEvent",value:function(e){return{event:{header:{namespace:"Text",name:"TextMessage",messageId:te()()},payload:{textMessage:e}}}}}]),e}(),se=a(28),oe=a(323),ie=new re,ce=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={messages:[new T.Message({id:H.USER,message:"Hello Alexa!",senderName:X.get(H.USER).name}),new T.Message({id:H.ALEXA,message:"Hey! Alexa here.",avatar:X.get(H.ALEXA).avatar}),new T.Message({id:H.USER,message:"Hello Alexa!",senderName:X.get(H.USER).name}),new T.Message({id:H.ALEXA,message:"Hey! Alexa here.",avatar:X.get(H.ALEXA).avatar}),new T.Message({id:H.USER,message:"Hello Alexa!",senderName:X.get(H.USER).name}),new T.Message({id:H.ALEXA,message:"Hey! Alexa here.",avatar:X.get(H.ALEXA).avatar}),new T.Message({id:H.USER,message:"Hello Alexa!",senderName:X.get(H.USER).name}),new T.Message({id:H.ALEXA,message:"Hey! Alexa here.",avatar:X.get(H.ALEXA).avatar}),new T.Message({id:H.USER,message:"Hello Alexa!",senderName:X.get(H.USER).name}),new T.Message({id:H.ALEXA,message:"Hey! Alexa here.",avatar:X.get(H.ALEXA).avatar}),new T.Message({id:H.USER,message:"Hello Alexa!",senderName:X.get(H.USER).name}),new T.Message({id:H.ALEXA,message:"Hey! Alexa here.",avatar:X.get(H.ALEXA).avatar}),new T.Message({id:H.USER,message:"Hello Alexa!",senderName:X.get(H.USER).name}),new T.Message({id:H.ALEXA,message:"Hey! Alexa here.",avatar:X.get(H.ALEXA).avatar}),new T.Message({id:H.USER,message:"Hello Alexa!",senderName:X.get(H.USER).name}),new T.Message({id:H.ALEXA,message:"Hey! Alexa here.",avatar:X.get(H.ALEXA).avatar}),new T.Message({id:H.USER,message:"Hello Alexa!",senderName:X.get(H.USER).name}),new T.Message({id:H.ALEXA,message:"Hey! Alexa here.",avatar:X.get(H.ALEXA).avatar}),new T.Message({id:H.USER,message:"Hello Alexa!",senderName:X.get(H.USER).name}),new T.Message({id:H.ALEXA,message:"Hey! Alexa here.",avatar:X.get(H.ALEXA).avatar}),new T.Message({id:H.USER,message:"Hello Alexa!",senderName:X.get(H.USER).name}),new T.Message({id:H.ALEXA,message:"Hey! Alexa here.",avatar:X.get(H.ALEXA).avatar}),new T.Message({id:H.USER,message:"Hello Alexa!",senderName:X.get(H.USER).name})],userRequestToAlexa:"",is_typing:!1},e}return Object(c.a)(a,[{key:"onUserRequestToAlexaSubmit",value:function(e){var t=this,a=this.state.userRequestToAlexa;if(e.preventDefault(),!a||0===a.length)return console.log("Request string for Alexa was empty: "+a),void this.setState({userRequestToAlexa:""});this.pushMessage(H.USER,a),this.setState({userRequestToAlexa:""});var n=this.props.history,r=this.props.cookies,s=r.get(b);if(void 0===s)return r.remove(b,void 0,{maxAge:0,secure:!1,path:"/"}),void n.push("/access_denied");ie.sendTextMessageEvent(a,s).then((function(e){return e.map((function(e){return t.pushMessage(H.ALEXA,e)}))})).catch((function(e){t.pushMessage(H.ALEXA,k.cannedErrorResponses.get(k.customErrorCodes.UNKNOWN_ERROR))}))}},{key:"pushMessage",value:function(e,t){var a=X.get(e);if(a)if(t&&0!==t.length){var n=this.state.messages.slice(),r=new T.Message({id:e,message:t,senderName:a.name,avatar:a.avatar});n.push(r),this.setState({messages:n})}else console.log("Empty message: "+t);else console.log("Unknown userId: "+e)}},{key:"handleChangeInUserRequestToAlexa",value:function(e){e.preventDefault(),this.setState({userRequestToAlexa:e.target.value})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"leftpanel"},r.a.createElement("div",{className:"panel-body"},r.a.createElement(S.a,null,(function(t){var a=t.height;return r.a.createElement(T.ChatFeed,{messages:e.state.messages,isTyping:e.state.is_typing,hasInputField:!1,showSenderName:!0,bubblesCentered:!1,maxHeight:a,chatBubble:C})}))),r.a.createElement("div",{id:"chat-input"},r.a.createElement(j,{value:this.state.userRequestToAlexa,onChange:function(t){return e.handleChangeInUserRequestToAlexa(t)},onSubmit:function(t){return e.onUserRequestToAlexaSubmit(t)}})))}}]),a}(n.Component),le=Object(se.g)(Object(oe.a)(ce));a(302);function ue(){return r.a.createElement("div",{id:"rightpanel"},r.a.createElement("div",{className:"panel-body"},"Right side content"))}a(303);function de(){return r.a.createElement("div",{id:"welcome-screen"},r.a.createElement("h1",null," WELCOME TO SILENT ALEXA (Under Construction) "),r.a.createElement("h1",null," Login to get started "))}function me(){var e=Object(A.a)([b]);return void 0!==Object(p.a)(e,1)[0][b]?[r.a.createElement(E.a,{key:"muiThemeProvider"},r.a.createElement(le,null)),r.a.createElement(ue,{key:"rightPanel"})]:r.a.createElement(de,null)}a(304);function he(){return r.a.createElement("div",{id:"footer"},r.a.createElement("div",{id:"footer-info"},r.a.createElement("span",null,"Footer Info Bar"),r.a.createElement("span",null," That Collapses")),r.a.createElement("div",{id:"footer-controls"},r.a.createElement("a",{href:"http://example.com"},"Clickable"),r.a.createElement("a",{href:"http://example.com"},"icons"),r.a.createElement("a",{href:"http://example.com"},"and"),r.a.createElement("a",{href:"http://example.com"},"links"),r.a.createElement("a",{href:"http://example.com"},"can"),r.a.createElement("a",{href:"http://example.com"},"go"),r.a.createElement("a",{href:"http://example.com"},"here")))}var Ee=a(135),pe=a.n(Ee);function ge(e){var t,a=Object(A.a)([b]),n=Object(p.a)(a,2)[1];return Object(M.hasIn)(e,["location","hash"])&&(t=pe.a.parse(e.location.hash,{parseNumbers:!0})),function(e){if(!e||!e.access_token||!e.expires_in||e.expires_in<0)return console.log("Encountered an error on login: "+J.a.inspect(e,{showHidden:!0,depth:null})),!1;return!0}(t)?(n(b,t.access_token,{maxAge:t.expires_in,secure:!1,path:"/"}),r.a.createElement(se.a,{to:"/"})):r.a.createElement(se.a,{to:"/access_denied"})}var fe=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(se.a,{to:"/"})}}]),a}(r.a.Component);a(317);function ve(){return r.a.createElement("div",{id:"loginfailed-screen"},r.a.createElement("h1",null," Login Failed "),r.a.createElement("h1",null," This is just a placeholder. We might want to redirect the user to the login page or at least have a link here to let the user try again or go home. "))}function Ae(e){return r.a.createElement(se.d,null,r.a.createElement(se.b,{exact:!0,path:["/authresponse"],render:function(t){return r.a.createElement(ge,Object.assign({},t,e))}}),r.a.createElement(se.b,{exact:!0,path:["/access_denied"],render:function(e){return r.a.createElement(ve,e)}}),r.a.createElement(se.b,{exact:!0,path:"/:foo+",render:function(e){return r.a.createElement(fe,e)}}))}var be=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{id:"page"},r.a.createElement(Ae,null),r.a.createElement(O,null),r.a.createElement(me,null),r.a.createElement(he,null))}}]),a}(n.Component),xe=a(51),Re=a.n(xe),we=r.a.createContext(),Oe=function(e){var t=e.children,a={setLWAResponse:function(e){Te(e)},isAuthenticated:function(){return void 0!==Re.a.get("amazon_Login_accessToken")},getAccessToken:function(){return Re.a.get("amazon_Login_accessToken")},clear:function(){Re.a.remove("amazon_Login_accessToken")}};return r.a.createElement(we.Provider,{value:a},t)},Te=function(e){if(!(e&&e.access_token&&e.expires_in)){var t=J.a.inspect(e,{showHidden:!0,depth:null});throw new B("LoginWithAmazon Authorization response is undefined or \n        doesnt have access_token/expires_in.\n        lwaResponse: ".concat(t))}Re.a.set("amazon_Login_accessToken",e.access_token,{expires:e.expires_in/86400,secure:!1})},Ne=a(40),Se=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ye(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var _e=a(324);o.a.render(r.a.createElement(Ne.a,null,r.a.createElement(_e.a,null,r.a.createElement(Oe,null,r.a.createElement(be,null)))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/silent-alexa",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/silent-alexa","/service-worker.js");Se?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ye(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):ye(e)}))}}()},88:function(e,t){var a=Object.freeze({EVENTS:"/v20160207/events",DIRECTIVES:"/v20160207/directives"}),n=Object.freeze({NA:"https://avs-alexa-na.amazon.com",EU:"https://avs-alexa-eu.amazon.com",FE:"https://avs-alexa-fe.amazon.com"});e.exports={urls:n,paths:a}}},[[138,1,2]]]);
//# sourceMappingURL=main.e7b6db52.chunk.js.map